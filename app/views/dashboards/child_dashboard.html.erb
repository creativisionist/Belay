<div ng-app="app">
  {{ 1 + 1 }}

<div ng-controller="childrenCtrl" ng-init="setup(<%= current_user.id %>)">

<h1>Welcome to your dashboard!</h1>

<h2>Tasks To Complete:</h2>
  <div>
    Total #: {{ incomplete_tasks.length }}
  </div>
  <div ng-repeat="task in incomplete_tasks">
    <ol>
      <a href="/tasks" title="Edit Task">
        <div>
          Task: {{ task.to_do }}
        </div>
        <div>
          Amount: {{ task.amount_earned }}
        </div>
        <div>
          Status: {{ task.status }}
        </div>
      </a>
    </ol>
  </div>

<h2>Bank Account:</h2>
  <ol>
    <div>
      <h3> Current Balance To Spend:</h3> 
      {{ total_balance }}  Points
    </div>
    <div>
      <h3> Current Investments:</h3>
      Total #: {{ current_investments.length }}
    </div>
  </ol>

<h5>
  <div ng-repeat="investment in current_investments">
    <ol>
      <div>
        Created: {{ investment.investment_date }}
      </div>
      <div>
        Duration Invested: {{ investment.duration }} days
      </div>
      <div>
        Days Remaining: {{ investment.days_remaining }}
      </div>
      <div>
        Days Passed: {{ investment.days_passed }}
      </div>
      <div>
        Rate: {{ investment.interest_rate }}
      </div>
      <div>
        Amount Originally Invested: {{ investment.money_invested }}
      </div>
      <div>
        Amount You Have Today: {{ investment.investment_balance_to_date }}
      </div>
      <div ng-if="investment.withdrawl_status === 'complete'">
        <button ng-click="updateStatus(investment.id)">Place in Spending Balance
        </button>
      </div>
    </ol>
  </div>
</h5>

<h5>
  <ol>
    <h3> Total Investments:</h3>
      {{ total_investments }}

    <h3> Total Investments + Balance Today: </h3>
      {{ investments_and_balance }}
    
    <h3> Current Interest Rate: </h3>
      {{ interest_rate }} per day
  </ol>
  
<h2>Ready to Shop?</h2>
  <div>
    <%= link_to "I'm ready to shop!", "/rewards" %>
  </div>


  Amount To Invest: <input ng-model="money_invested" convert-to-decimal>
  Days To Save: <select ng-model="duration" convert-to-integer>
    <option value="30">30</option>
    <option value="90">90</option>
    <option value="180">180</option>
    <option value="360">360</option>
  </select>

<button ng-click="addInvestment(money_invested, duration)">Save Away!</button>

</div>